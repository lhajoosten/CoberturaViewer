<div class="details-panel" *ngIf="selectedNode">
    <div class="details-header">
        <h3>Class Details</h3>
        <button class="close-button" (click)="onClose()">Ã—</button>
    </div>

    <div class="details-content">
        <div class="class-info">
            <h4 class="class-name">{{ selectedNode.className }}</h4>
            <div class="package-name">{{ selectedNode.packageName }}</div>

            <div class="coverage-indicator">
                <div class="coverage-label">Coverage</div>
                <div class="coverage-value" [ngClass]="getCoverageClass(selectedNode.coverage)">
                    {{ selectedNode.coverage.toFixed(1) }}%
                </div>
            </div>

            <div class="metrics">
                <div class="metric">
                    <div class="metric-label">Lines of Code</div>
                    <div class="metric-value">{{ selectedNode.linesValid }}</div>
                </div>

                <div class="metric" *ngIf="selectedNode.linesCovered !== undefined">
                    <div class="metric-label">Covered Lines</div>
                    <div class="metric-value">{{ selectedNode.linesCovered.toFixed(0) }}</div>
                </div>

                <div class="metric" *ngIf="selectedNode.branchRate !== undefined">
                    <div class="metric-label">Branch Coverage</div>
                    <div class="metric-value" [ngClass]="getCoverageClass(selectedNode.branchRate || 0)">
                        {{ selectedNode.branchRate.toFixed(1) }}%
                    </div>
                </div>
            </div>

            <div class="details-file" *ngIf="selectedNode.filename">
                <div class="file-label">File:</div>
                <div class="file-path">{{ selectedNode.filename }}</div>
            </div>
        </div>

        <div class="similar-classes" *ngIf="similarClasses.length > 0">
            <h4>Similar Classes in Package</h4>
            <div class="similar-list">
                <div class="similar-item" *ngFor="let item of similarClasses" (click)="onSelectNode(item)">
                    <div class="similar-name">{{ item.className }}</div>
                    <div class="similar-coverage" [ngClass]="getCoverageClass(item.coverage)">
                        {{ item.coverage.toFixed(1) }}%
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>