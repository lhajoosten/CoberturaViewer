<div class="metrics-view">
    <div class="metrics-grid">
        <!-- Total Coverage Card -->
        <div class="metric-card">
            <div class="metric-visual">
                <div class="metric-circle">
                    <svg viewBox="0 0 36 36">
                        <path class="metric-circle-bg" d="M18 2.0845
                     a 15.9155 15.9155 0 0 1 0 31.831
                     a 15.9155 15.9155 0 0 1 0 -31.831" />
                        <path class="metric-circle-fill"
                            [attr.stroke-dasharray]="coverageData.summary.lineCoverage + ', 100'" d="M18 2.0845
                     a 15.9155 15.9155 0 0 1 0 31.831
                     a 15.9155 15.9155 0 0 1 0 -31.831" />
                        <text x="18" y="20" class="metric-text">{{coverageData.summary.lineCoverage.toFixed(1)}}%</text>
                    </svg>
                </div>
            </div>
            <div class="metric-info">
                <div class="metric-title">Line Coverage</div>
                <div class="metric-subtitle">{{coverageData.summary.linesCovered}} / {{coverageData.summary.linesValid}}
                    lines</div>
            </div>
        </div>

        <!-- Branch Coverage Card -->
        <div class="metric-card" *ngIf="coverageData.summary.branchCoverage !== undefined">
            <div class="metric-visual">
                <div class="metric-circle">
                    <svg viewBox="0 0 36 36">
                        <path class="metric-circle-bg" d="M18 2.0845
                     a 15.9155 15.9155 0 0 1 0 31.831
                     a 15.9155 15.9155 0 0 1 0 -31.831" />
                        <path class="metric-circle-fill"
                            [attr.stroke-dasharray]="coverageData.summary.branchCoverage + ', 100'" d="M18 2.0845
                     a 15.9155 15.9155 0 0 1 0 31.831
                     a 15.9155 15.9155 0 0 1 0 -31.831" />
                        <text x="18" y="20"
                            class="metric-text">{{coverageData.summary.branchCoverage.toFixed(1)}}%</text>
                    </svg>
                </div>
            </div>
            <div class="metric-info">
                <div class="metric-title">Branch Coverage</div>
                <div class="metric-subtitle">Conditional logic paths</div>
            </div>
        </div>

        <!-- Coverage Distribution Card -->
        <div class="metric-card distribution">
            <div class="metric-info">
                <div class="metric-title">Coverage Distribution</div>
                <div class="metric-subtitle">{{classCount}} classes total</div>
            </div>
            <div class="distribution-bars">
                <div class="distribution-item">
                    <div class="distribution-bar excellent"
                        [style.width.%]="(coverageDistribution.excellent / classCount) * 100">
                        {{coverageDistribution.excellent}}
                    </div>
                    <div class="distribution-label">Excellent</div>
                </div>
                <div class="distribution-item">
                    <div class="distribution-bar good" [style.width.%]="(coverageDistribution.good / classCount) * 100">
                        {{coverageDistribution.good}}
                    </div>
                    <div class="distribution-label">Good</div>
                </div>
                <div class="distribution-item">
                    <div class="distribution-bar average"
                        [style.width.%]="(coverageDistribution.average / classCount) * 100">
                        {{coverageDistribution.average}}
                    </div>
                    <div class="distribution-label">Average</div>
                </div>
                <div class="distribution-item">
                    <div class="distribution-bar poor" [style.width.%]="(coverageDistribution.poor / classCount) * 100">
                        {{coverageDistribution.poor}}
                    </div>
                    <div class="distribution-label">Poor</div>
                </div>
            </div>
        </div>
    </div>

    <div class="metrics-grid secondary-grid">
        <!-- Components Card -->
        <div class="metric-card stats">
            <div class="metric-info">
                <div class="metric-title">Components</div>
            </div>
            <div class="stats-grid">
                <div class="stat-item">
                    <div class="stat-value">{{packageCount}}</div>
                    <div class="stat-label">Packages</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value">{{classCount}}</div>
                    <div class="stat-label">Classes</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value">{{methodCount}}</div>
                    <div class="stat-label">Methods</div>
                </div>
            </div>
        </div>

        <!-- Coverage Thresholds Card -->
        <div class="metric-card thresholds">
            <div class="metric-info">
                <div class="metric-title">Coverage Thresholds</div>
            </div>
            <div class="thresholds-grid">
                <div class="threshold-item excellent">
                    <div class="threshold-label">Excellent</div>
                    <div class="threshold-value">≥ {{thresholds.excellent}}%</div>
                </div>
                <div class="threshold-item good">
                    <div class="threshold-label">Good</div>
                    <div class="threshold-value">≥ {{thresholds.good}}%</div>
                </div>
                <div class="threshold-item average">
                    <div class="threshold-label">Average</div>
                    <div class="threshold-value">≥ {{thresholds.average}}%</div>
                </div>
                <div class="threshold-item poor">
                    <div class="threshold-label">Poor</div>
                    <div class="threshold-value">
                        < {{thresholds.average}}%</div>
                    </div>
                </div>
            </div>
        </div>
    </div>