<div class="app-container" [class.dark-theme]="isDarkTheme">
  <app-header></app-header>

  <main class="main-content">
    <div class="app-content-wrapper">
      <router-outlet></router-outlet>
    </div>
  </main>

  <app-footer></app-footer>

  <!-- About modal -->
  <div class="modal-overlay" *ngIf="activeModal === 'about'">
    <div class="modal-container">
      <div class="modal-header">
        <h3>About Coverage Dashboard</h3>
        <button class="modal-close" (click)="closeModal()">×</button>
      </div>
      <div class="modal-body">
        <div class="about-content">
          <div class="about-logo">
            <i class="fas fa-chart-pie"></i>
          </div>
          <h4>Test Coverage Dashboard</h4>
          <p class="about-version">Version 1.2.0</p>
          <p>A powerful tool for visualizing and analyzing test coverage data from Cobertura XML reports.</p>

          <h5>Features</h5>
          <ul>
            <li>Interactive treemap and sunburst visualizations</li>
            <li>Historical trend analysis</li>
            <li>Smart insights and recommendations</li>
            <li>Custom filtering and sorting</li>
            <li>Export capabilities</li>
          </ul>

          <p class="about-footer">Built with Angular, D3.js and NGX-Charts</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Help modal -->
  <div class="modal-overlay" *ngIf="activeModal === 'help'">
    <div class="modal-container">
      <div class="modal-header">
        <h3>Help & Getting Started</h3>
        <button class="modal-close" (click)="closeModal()">×</button>
      </div>
      <div class="modal-body">
        <div class="help-content">
          <h4>Getting Started</h4>
          <ol>
            <li>Upload a Cobertura XML file using the file uploader</li>
            <li>Explore different visualizations using the tabs</li>
            <li>Interact with charts to drill down into specific components</li>
            <li>Review insights and recommendations</li>
          </ol>

          <h4>Working with Visualizations</h4>
          <ul>
            <li><strong>Treemap</strong> - Shows nested rectangles representing packages and classes</li>
            <li><strong>Sunburst</strong> - Displays coverage as a radial hierarchy</li>
            <li><strong>History</strong> - Charts showing coverage trends over time</li>
            <li><strong>Insights</strong> - Actionable recommendations to improve coverage</li>
          </ul>

          <h4>Need More Help?</h4>
          <p>
            Check out the <a href="https://github.com/lhajoosten/CoberturaViewer" target="_blank">GitHub repository</a>
            for more documentation or submit an issue if you encounter problems.
          </p>
        </div>
      </div>
    </div>
  </div>

  <!-- Keyboard Shortcuts modal (new) -->
  <div class="modal-overlay" *ngIf="activeModal === 'shortcuts'">
    <div class="modal-container">
      <div class="modal-header">
        <h3>Keyboard Shortcuts</h3>
        <button class="modal-close" (click)="closeModal()">×</button>
      </div>
      <div class="modal-body">
        <div class="help-content">
          <p>Use these keyboard shortcuts to quickly navigate the application:</p>

          <div class="shortcuts-grid">
            <div class="shortcut" *ngFor="let item of getKeyboardShortcutsArray()">
              <kbd>{{item.key}}</kbd>
              <span>{{item.description}}</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Upload modal -->
  <div class="modal-overlay" *ngIf="activeModal === 'upload'">
    <div class="modal-container">
      <div class="modal-header">
        <h3>Upload New Coverage Data</h3>
        <button class="modal-close" (click)="closeModal()">×</button>
      </div>
      <div class="modal-body">
        <p class="modal-message">Uploading new data will replace the current visualization. Your history will be
          preserved.</p>
        <app-file-uploader (uploadComplete)="onUploadComplete()"></app-file-uploader>
      </div>
    </div>
  </div>
</div>