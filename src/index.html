<!doctype html>
<html lang="en">

<head>
  <script>
    // Immediately set the theme from localStorage to prevent flickering
    (function () {
      const savedTheme = localStorage.getItem('theme');
      if (savedTheme === 'dark' || (savedTheme === null && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
        document.documentElement.classList.add('dark-theme');
        localStorage.setItem('theme', 'dark');
      } else {
        document.documentElement.classList.remove('dark-theme');
        localStorage.setItem('theme', 'light');
      }
    })();
  </script>

  <meta charset="utf-8">
  <title>Cobertura Explorer</title>
  <base href="/">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Interactive visualization tool for Cobertura code coverage reports">
  <meta name="keywords" content="cobertura, code coverage, visualization, testing">
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
</head>

<body>
  <app-root></app-root>
  <script>
    // Check if the document is loaded
    document.addEventListener('DOMContentLoaded', function () {
      // If we're not on index.html, e.g., we're on /dashboard directly
      if (window.location.pathname !== '/' && !document.querySelector('app-root app-component')) {
        // Wait a bit to check if Angular router kicks in
        setTimeout(function () {
          // If Angular didn't render anything, try reloading with / to engage the router
          if (!document.querySelector('app-root app-component')) {
            window.location.href = '/';
          }
        }, 1000);
      }
    });
  </script>
</body>

</html>