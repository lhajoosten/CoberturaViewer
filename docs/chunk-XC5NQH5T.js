import{O as o,T as n,oc as d,pa as c}from"./chunk-SU5VR5TY.js";var h=class a{notifications=[];container=null;nextId=1;isBrowser;isDarkTheme=!1;maxToasts=5;constructor(t){this.isBrowser=d(t),this.isBrowser&&(this.createContainer(),this.isDarkTheme=document.body.classList.contains("dark-theme"),this.setupThemeListener())}setupThemeListener(){if(!this.isBrowser)return;new MutationObserver(e=>{e.forEach(s=>{s.attributeName==="class"&&(this.isDarkTheme=document.body.classList.contains("dark-theme"),this.container&&(this.isDarkTheme?this.container.classList.add("dark-theme"):this.container.classList.remove("dark-theme")))})}).observe(document.body,{attributes:!0})}createContainer(){this.isBrowser&&(this.container||(this.container=document.createElement("div"),this.container.className="toast-container",this.isDarkTheme=document.body.classList.contains("dark-theme"),this.isDarkTheme&&this.container.classList.add("dark-theme"),document.body.appendChild(this.container)))}showSuccess(t,e,s=3e3){this.show("success",t,e,s)}showError(t,e,s=5e3){this.show("error",t,e,s)}showWarning(t,e,s=4e3){this.show("warning",t,e,s)}showInfo(t,e,s=3e3){this.show("info",t,e,s)}show(t,e,s,r){if(!this.isBrowser)return;this.createContainer();let i={id:this.nextId++,type:t,title:e,message:s,duration:r};if(this.notifications.length>=this.maxToasts){let l=this.notifications[0].id;this.remove(l)}this.notifications.push(i),this.renderNotification(i),r>0&&setTimeout(()=>{this.remove(i.id)},r)}remove(t){let e=this.notifications.findIndex(s=>s.id===t);if(e!==-1){this.notifications.splice(e,1);let s=document.getElementById(`toast-${t}`);s&&this.container&&(s.classList.add("fade-out"),s.classList.remove("fade-in"),setTimeout(()=>{s.parentNode===this.container&&this.container?.removeChild(s)},300))}}renderNotification(t){if(!this.container)return;let e=document.createElement("div");e.id=`toast-${t.id}`,e.className=`toast ${t.type} fade-in`;let s="";switch(t.type){case"success":s="fas fa-check-circle";break;case"error":s="fas fa-exclamation-circle";break;case"warning":s="fas fa-exclamation-triangle";break;case"info":s="fas fa-info-circle";break}if(e.innerHTML=`
        <div class="toast-icon">
            <i class="${s}"></i>
        </div>
        <div class="toast-content">
            <div class="toast-title">${t.title}</div>
            <div class="toast-message">${t.message}</div>
        </div>
        <button class="toast-close" aria-label="Close">
            <i class="fas fa-times"></i>
        </button>
        `,t.duration>0){let r=`animation-duration: ${t.duration}ms`;e.setAttribute("style",`--progress-duration: ${t.duration}ms`);let i=document.createElement("style");i.textContent=`
                #toast-${t.id}::after {
                    animation-duration: ${t.duration}ms;
                }
            `,document.head.appendChild(i)}e.querySelector(".toast-close")?.addEventListener("click",()=>{this.remove(t.id)}),this.container.firstChild?this.container.insertBefore(e,this.container.firstChild):this.container.appendChild(e)}clearAll(){if(!this.container)return;this.container.querySelectorAll(".toast").forEach(e=>{e.classList.add("fade-out"),e.classList.remove("fade-in")}),setTimeout(()=>{for(this.notifications=[];this.container&&this.container.firstChild;)this.container.removeChild(this.container.firstChild)},300)}static \u0275fac=function(e){return new(e||a)(n(c))};static \u0275prov=o({token:a,factory:a.\u0275fac,providedIn:"root"})};export{h as a};
